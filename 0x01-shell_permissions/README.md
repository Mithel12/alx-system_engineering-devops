More advanced implementation of shell commands
